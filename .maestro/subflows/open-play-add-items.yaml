appId: uk.gleissner.c64commander
env:
  LONG_TIMEOUT: ${LONG_TIMEOUT || "20000"}
  SHORT_TIMEOUT: ${SHORT_TIMEOUT || "5000"}
  TIMEOUT: ${TIMEOUT || "15000"}
tags:
  - subflow
---
- runFlow: launch-and-wait.yaml
- retry:
    maxRetries: 3
    commands:
      - runFlow:
          when:
            visible: "Continue in Demo Mode"
          file: continue-demo.yaml
      - tapOn:
          text: "Continue in Demo Mode"
          optional: true
      - tapOn:
          text: "Got it"
          optional: true
      - tapOn:
          text: "Wait"
          optional: true
      - tapOn:
          text: "Close app"
          optional: true
      - waitForAnimationToEnd
      - extendedWaitUntil:
          visible:
            text: "Home"
          timeout: ${TIMEOUT}
- tapOn:
    point: "25%,95%"
    optional: true
- tapOn:
    text: "Play"
    optional: true
- extendedWaitUntil:
    visible: "Playlist"
    timeout: ${TIMEOUT}
- assertVisible: "Playlist"
- waitForAnimationToEnd
- takeScreenshot: play-files
- retry:
    maxRetries: 3
    commands:
      - tapOn:
          id: "add-items-to-playlist"
          optional: true
      - tapOn:
          text: "Add items"
          optional: true
      - tapOn:
          text: "Add more items"
          optional: true
      - tapOn:
          text: "Add items to playlist"
          optional: true
      - waitForAnimationToEnd
      - extendedWaitUntil:
          visible: "Choose source"
          timeout: ${TIMEOUT}
- scrollUntilVisible:
    element:
      id: "import-option-local"
    direction: DOWN
    timeout: ${TIMEOUT}
- assertVisible:
    id: "import-option-local"
- takeScreenshot: choose-source
